{% extends 'base.html.twig' %}

{# ✅ applique ce template comme form theme pour ce formulaire #}
{% form_theme registrationForm _self %}

{% block title %}Inscription
{% endblock %}

{% block page_styles %}
	<link rel="stylesheet" href="{{ asset('css/auth.css') }}">
{% endblock %}

{% block form_errors %}
	{% if errors|length > 0 %}
		<div class="alert-error">
			{% for error in errors %}
				<div>{{ error.message }}</div>
			{% endfor %}
		</div>
	{% endif %}
{% endblock %}

{% block body %}
	<div class="register-wrapper">
		<div class="register-hero" style="background-image:url('{{ asset('images/register.jpg') }}');"></div>

		<div class="register-panel">
			<div class="panel-inner">
				<h1>Inscription</h1>
				<p class="subtitle">Tous les champs sont obligatoires.</p>

				{{ form_start(registrationForm, { attr: { novalidate: 'novalidate' } }) }}

				{{ form_row(registrationForm.lastName) }}
				{{ form_row(registrationForm.firstName) }}
				{{ form_row(registrationForm.email) }}

				{{ form_row(registrationForm.plainPassword.first) }}
				{{ form_row(registrationForm.plainPassword.second) }}
				{# erreurs "globale" du RepeatedType (mots de passe différents) #}
				{{ form_errors(registrationForm.plainPassword) }}

				<div class="checkbox-row">
					{{ form_widget(registrationForm.cguAccepted) }}
					<label for="{{ registrationForm.cguAccepted.vars.id }}">
						{{ registrationForm.cguAccepted.vars.label|default("J'accepte les CGU de GreenGoodies") }}
					</label>
					{{ form_errors(registrationForm.cguAccepted) }}
				</div>

				<button class="btn-primary" type="submit">S'inscrire</button>

				{{ form_end(registrationForm) }}

				<p class="alt-link">
					Déjà un compte ?
					<a href="{{ path('app_login') }}">Se connecter</a>
				</p>
			</div>
		</div>
	</div>
{% endblock %}
